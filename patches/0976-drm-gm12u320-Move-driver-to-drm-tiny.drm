From 662421b98ee14deae0b9510e614f2595d55f81f9 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Noralf=20Tr=C3=B8nnes?= <noralf@tronnes.org>
Date: Thu, 25 Jul 2019 12:51:32 +0200
Subject: [PATCH 0976/1606] drm/gm12u320: Move driver to drm/tiny
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Move the driver to the new haven for tiny DRM drivers.

Cc: Hans de Goede <hdegoede@redhat.com>
Suggested-by: Daniel Vetter <daniel.vetter@ffwll.ch>
Signed-off-by: Noralf Tr√∏nnes <noralf@tronnes.org>
Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
Acked-by: Sam Ravnborg <sam@ravnborg.org>
Reviewed-by: Hans de Goede <hdegoede@redhat.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20190725105132.22545-4-noralf@tronnes.org
---
 MAINTAINERS                                   |  2 +-
 drivers/gpu/drm/Kconfig                       |  2 --
 drivers/gpu/drm/Makefile                      |  1 -
 drivers/gpu/drm/gm12u320/Kconfig              |  9 ---------
 drivers/gpu/drm/gm12u320/Makefile             |  2 --
 drivers/gpu/drm/tiny/Kconfig                  | 10 ++++++++++
 drivers/gpu/drm/tiny/Makefile                 |  1 +
 drivers/gpu/drm/{gm12u320 => tiny}/gm12u320.c |  0
 8 files changed, 12 insertions(+), 15 deletions(-)
 delete mode 100644 drivers/gpu/drm/gm12u320/Kconfig
 delete mode 100644 drivers/gpu/drm/gm12u320/Makefile
 rename drivers/gpu/drm/{gm12u320 => tiny}/gm12u320.c (100%)

diff --git a/MAINTAINERS b/MAINTAINERS
index a1b7066df7fd..fc5856686ccb 100644
--- a/MAINTAINERS
+++ b/MAINTAINERS
@@ -5103,7 +5103,7 @@ DRM DRIVER FOR GRAIN MEDIA GM12U320 PROJECTORS
 M:	Hans de Goede <hdegoede@redhat.com>
 T:	git git://anongit.freedesktop.org/drm/drm-misc
 S:	Maintained
-F:	drivers/gpu/drm/gm12u320/
+F:	drivers/gpu/drm/tiny/gm12u320.c
 
 DRM DRIVER FOR ILITEK ILI9225 PANELS
 M:	David Lechner <david@lechnology.com>
diff --git a/drivers/gpu/drm/Kconfig b/drivers/gpu/drm/Kconfig
index 4368ad95cf15..e67c194c2aca 100644
--- a/drivers/gpu/drm/Kconfig
+++ b/drivers/gpu/drm/Kconfig
@@ -358,8 +358,6 @@ source "drivers/gpu/drm/aspeed/Kconfig"
 
 source "drivers/gpu/drm/mcde/Kconfig"
 
-source "drivers/gpu/drm/gm12u320/Kconfig"
-
 # Keep legacy drivers last
 
 menuconfig DRM_LEGACY
diff --git a/drivers/gpu/drm/Makefile b/drivers/gpu/drm/Makefile
index 1d366c4bbd1f..10f8329a8b71 100644
--- a/drivers/gpu/drm/Makefile
+++ b/drivers/gpu/drm/Makefile
@@ -121,4 +121,3 @@ obj-$(CONFIG_DRM_LIMA)  += lima/
 obj-$(CONFIG_DRM_PANFROST) += panfrost/
 obj-$(CONFIG_DRM_ASPEED_GFX) += aspeed/
 obj-$(CONFIG_DRM_MCDE) += mcde/
-obj-$(CONFIG_DRM_GM12U320) += gm12u320/
diff --git a/drivers/gpu/drm/gm12u320/Kconfig b/drivers/gpu/drm/gm12u320/Kconfig
deleted file mode 100644
index 0882a61c04d5..000000000000
--- a/drivers/gpu/drm/gm12u320/Kconfig
+++ /dev/null
@@ -1,9 +0,0 @@
-# SPDX-License-Identifier: GPL-2.0+
-config DRM_GM12U320
-	tristate "GM12U320 driver for USB projectors"
-	depends on DRM && USB
-	select DRM_KMS_HELPER
-	select DRM_GEM_SHMEM_HELPER
-	help
-	 This is a KMS driver for projectors which use the GM12U320 chipset
-	 for video transfer over USB2/3, such as the Acer C120 mini projector.
diff --git a/drivers/gpu/drm/gm12u320/Makefile b/drivers/gpu/drm/gm12u320/Makefile
deleted file mode 100644
index ea514382f00d..000000000000
--- a/drivers/gpu/drm/gm12u320/Makefile
+++ /dev/null
@@ -1,2 +0,0 @@
-# SPDX-License-Identifier: GPL-2.0+
-obj-$(CONFIG_DRM_GM12U320) += gm12u320.o
diff --git a/drivers/gpu/drm/tiny/Kconfig b/drivers/gpu/drm/tiny/Kconfig
index f8c9a0e71dde..504763423d46 100644
--- a/drivers/gpu/drm/tiny/Kconfig
+++ b/drivers/gpu/drm/tiny/Kconfig
@@ -1,4 +1,14 @@
 # SPDX-License-Identifier: GPL-2.0-only
+
+config DRM_GM12U320
+	tristate "GM12U320 driver for USB projectors"
+	depends on DRM && USB
+	select DRM_KMS_HELPER
+	select DRM_GEM_SHMEM_HELPER
+	help
+	 This is a KMS driver for projectors which use the GM12U320 chipset
+	 for video transfer over USB2/3, such as the Acer C120 mini projector.
+
 config TINYDRM_HX8357D
 	tristate "DRM support for HX8357D display panels"
 	depends on DRM && SPI
diff --git a/drivers/gpu/drm/tiny/Makefile b/drivers/gpu/drm/tiny/Makefile
index 6490167a9ad1..896cf31132d3 100644
--- a/drivers/gpu/drm/tiny/Makefile
+++ b/drivers/gpu/drm/tiny/Makefile
@@ -1,5 +1,6 @@
 # SPDX-License-Identifier: GPL-2.0-only
 
+obj-$(CONFIG_DRM_GM12U320)		+= gm12u320.o
 obj-$(CONFIG_TINYDRM_HX8357D)		+= hx8357d.o
 obj-$(CONFIG_TINYDRM_ILI9225)		+= ili9225.o
 obj-$(CONFIG_TINYDRM_ILI9341)		+= ili9341.o
diff --git a/drivers/gpu/drm/gm12u320/gm12u320.c b/drivers/gpu/drm/tiny/gm12u320.c
similarity index 100%
rename from drivers/gpu/drm/gm12u320/gm12u320.c
rename to drivers/gpu/drm/tiny/gm12u320.c
-- 
2.17.1

