From 395d37f3eef45cddea7606196930b5726e071c40 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Wed, 17 May 2023 10:32:08 +0800
Subject: [PATCH 02/12] Revert "drm/armada: Fix a potential double free in an
 error handling path"

This reverts commit 4a519731ece83d0884fa12595206f1d12f7fe4e5.
---
 drivers/gpu/drm/armada/armada_drv.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/gpu/drm/armada/armada_drv.c b/drivers/gpu/drm/armada/armada_drv.c
index 2d1e1e48f0eec..980d3f1f8f16e 100644
--- a/drivers/gpu/drm/armada/armada_drv.c
+++ b/drivers/gpu/drm/armada/armada_drv.c
@@ -102,6 +102,7 @@ static int armada_drm_bind(struct device *dev)
 	if (ret) {
 		dev_err(dev, "[" DRM_NAME ":%s] can't kick out simple-fb: %d\n",
 			__func__, ret);
+		kfree(priv);
 		return ret;
 	}
 
-- 
2.25.1

