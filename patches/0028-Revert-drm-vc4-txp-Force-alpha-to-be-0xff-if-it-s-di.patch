From 342be2e941962b8e442e855c7e23761b02babded Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Fri, 12 Aug 2022 17:04:00 +0800
Subject: [PATCH 28/46] Revert "drm/vc4: txp: Force alpha to be 0xff if it's
 disabled"

This reverts commit c398c2149b1773c56f9bc64b370df56db4fe09d1.
---
 drivers/gpu/drm/vc4/vc4_txp.c | 6 ------
 1 file changed, 6 deletions(-)

diff --git a/drivers/gpu/drm/vc4/vc4_txp.c b/drivers/gpu/drm/vc4/vc4_txp.c
index 0d9263f65d95..2342b49c16dd 100644
--- a/drivers/gpu/drm/vc4/vc4_txp.c
+++ b/drivers/gpu/drm/vc4/vc4_txp.c
@@ -291,12 +291,6 @@ static void vc4_txp_connector_atomic_commit(struct drm_connector *conn,
 
 	if (fb->format->has_alpha)
 		ctrl |= TXP_ALPHA_ENABLE;
-	else
-		/*
-		 * If TXP_ALPHA_ENABLE isn't set and TXP_ALPHA_INVERT is, the
-		 * hardware will force the output padding to be 0xff.
-		 */
-		ctrl |= TXP_ALPHA_INVERT;
 
 	gem = drm_fb_cma_get_gem_obj(fb, 0);
 	TXP_WRITE(TXP_DST_PTR, gem->paddr + fb->offsets[0]);
-- 
2.27.0

