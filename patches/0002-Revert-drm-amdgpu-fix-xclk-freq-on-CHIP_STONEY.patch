From d78c9a39ec801111326f156fb17c2c3233728f27 Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Tue, 20 Jun 2023 05:27:37 +0800
Subject: [PATCH 02/30] Revert "drm/amdgpu: fix xclk freq on CHIP_STONEY"

This reverts commit 00380551353be6581815efb2f1ff9c687a2f40df.
---
 drivers/gpu/drm/amd/amdgpu/vi.c | 11 ++---------
 1 file changed, 2 insertions(+), 9 deletions(-)

diff --git a/drivers/gpu/drm/amd/amdgpu/vi.c b/drivers/gpu/drm/amd/amdgpu/vi.c
index 2e030a308b6e6..9bcd0eebc6d7e 100644
--- a/drivers/gpu/drm/amd/amdgpu/vi.c
+++ b/drivers/gpu/drm/amd/amdgpu/vi.c
@@ -329,15 +329,8 @@ static u32 vi_get_xclk(struct amdgpu_device *adev)
 	u32 reference_clock = adev->clock.spll.reference_freq;
 	u32 tmp;
 
-	if (adev->flags & AMD_IS_APU) {
-		switch (adev->asic_type) {
-		case CHIP_STONEY:
-			/* vbios says 48Mhz, but the actual freq is 100Mhz */
-			return 10000;
-		default:
-			return reference_clock;
-		}
-	}
+	if (adev->flags & AMD_IS_APU)
+		return reference_clock;
 
 	tmp = RREG32_SMC(ixCG_CLKPIN_CNTL_2);
 	if (REG_GET_FIELD(tmp, CG_CLKPIN_CNTL_2, MUX_TCLK_TO_XCLK))
-- 
2.25.1

