From f818dcda290c9dfa5760398fd097f509bcc62be9 Mon Sep 17 00:00:00 2001
From: Ong Boon Leong <boon.leong.ong@intel.com>
Date: Thu, 4 Jun 2020 00:49:49 +0800
Subject: [PATCH 46/78] net: stmmac: change priv->state test_bit() for
 stmmac_xsk_wakeup

stmmac's priv->state is now a pointer to memory location created by
bitmap_zalloc, so we change it here.

Signed-off-by: Ong Boon Leong <boon.leong.ong@intel.com>
---
 drivers/net/ethernet/stmicro/stmmac/stmmac_xsk.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/stmicro/stmmac/stmmac_xsk.c b/drivers/net/ethernet/stmicro/stmmac/stmmac_xsk.c
index a8e95bdb032d..50d91c6ae94b 100644
--- a/drivers/net/ethernet/stmicro/stmmac/stmmac_xsk.c
+++ b/drivers/net/ethernet/stmicro/stmmac/stmmac_xsk.c
@@ -1006,7 +1006,7 @@ int stmmac_xsk_wakeup(struct net_device *dev, u32 queue, u32 flags)
 	rx_q = &priv->rx_queue[queue];
 	rx_ch = &priv->channel[queue];
 
-	if (test_bit(STMMAC_DOWN, &priv->state))
+	if (test_bit(STMMAC_DOWN, priv->state))
 		return -ENETDOWN;
 
 	if (!stmmac_enabled_xdp(priv))
-- 
2.17.1

