From cbfc40845d6834da1380c012d25b64bff76f466b Mon Sep 17 00:00:00 2001
From: "Tian, Baofeng" <baofeng.tian@intel.com>
Date: Wed, 3 Apr 2019 15:56:25 +0800
Subject: [PATCH 1084/1214] ablbc: add null pointer check for notifier call
 when reset happens

Change-Id: Ie3fc28061fa060fbe3cfe53cf4fa25e0cd922873
Tracked-On: OAM-79188
Signed-off-by: Tian, Baofeng <baofeng.tian@intel.com>
---
 drivers/staging/android/abl/ablbc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/staging/android/abl/ablbc.c b/drivers/staging/android/abl/ablbc.c
index 1051973..cdcf726 100644
--- a/drivers/staging/android/abl/ablbc.c
+++ b/drivers/staging/android/abl/ablbc.c
@@ -302,7 +302,7 @@ static int ablbc_reboot_notifier_call(struct notifier_block *notifier,
 
 	if (what != SYS_RESTART)
 		return NOTIFY_DONE;
-	if (target[0] != '\0') {
+	if ((target != NULL) && (target[0] != '\0')) {
 		ret = set_reboot_target(target);
 		if (ret)
 			pr_err("%s: Failed to set reboot target, ret=%d\n",
-- 
2.7.4

