From d5e42ff26d608d226d8d26be0486f40e02881481 Mon Sep 17 00:00:00 2001
From: "Zawawi, Muhammad Zul Husni" <muhammad.zul.husni.zawawi@intel.com>
Date: Fri, 18 Feb 2022 15:34:27 +0800
Subject: [PATCH 22/22] drm/i915: Fixes for compile error and warning

Signed-off-by: Zawawi, Muhammad Zul Husni <muhammad.zul.husni.zawawi@intel.com>
---
 drivers/gpu/drm/i915/gt/uc/intel_guc_hwconfig.c | 2 +-
 drivers/gpu/drm/i915/i915_pci.c                 | 2 +-
 drivers/gpu/drm/i915/i915_sriov.c               | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/gpu/drm/i915/gt/uc/intel_guc_hwconfig.c b/drivers/gpu/drm/i915/gt/uc/intel_guc_hwconfig.c
index 19010410fc7a..faf017383099 100644
--- a/drivers/gpu/drm/i915/gt/uc/intel_guc_hwconfig.c
+++ b/drivers/gpu/drm/i915/gt/uc/intel_guc_hwconfig.c
@@ -134,7 +134,7 @@ u32 intel_guc_hwconfig_get_value(struct intel_guc_hwconfig *hwconfig, u32 key)
 
 static bool has_table(struct drm_i915_private *i915)
 {
-	if (IS_ADLP_GT_STEP(i915, STEP_B0, STEP_FOREVER))
+	if (IS_ADLP_GRAPHICS_STEP(i915, STEP_B0, STEP_FOREVER))
 		return 1;
 
 	return 0;
diff --git a/drivers/gpu/drm/i915/i915_pci.c b/drivers/gpu/drm/i915/i915_pci.c
index 9656e05aef71..52bf49b35025 100644
--- a/drivers/gpu/drm/i915/i915_pci.c
+++ b/drivers/gpu/drm/i915/i915_pci.c
@@ -1201,7 +1201,7 @@ bool __pci_resource_valid(struct pci_dev *pdev, int bar)
 
 static bool intel_bars_valid(struct pci_dev *pdev, struct intel_device_info *intel_info)
 {
-	const int gttmmaddr_bar = intel_info->graphics_ver == 2 ? GEN2_GTTMMADR_BAR : GTTMMADR_BAR;
+	const int gttmmaddr_bar = intel_info->graphics.ver == 2 ? GEN2_GTTMMADR_BAR : GTTMMADR_BAR;
 	const int gfxmem_bar = GFXMEM_BAR;
 
 	if (!__pci_resource_valid(pdev, gttmmaddr_bar))
diff --git a/drivers/gpu/drm/i915/i915_sriov.c b/drivers/gpu/drm/i915/i915_sriov.c
index e42923d5c462..a91abb36da21 100644
--- a/drivers/gpu/drm/i915/i915_sriov.c
+++ b/drivers/gpu/drm/i915/i915_sriov.c
@@ -178,7 +178,7 @@ static void vf_tweak_device_info(struct drm_i915_private *i915)
 	/* Force PCH_NOOP. We have no access to display */
 	i915->pch_type = PCH_NOP;
 	memset(&info->display, 0, sizeof(info->display));
-	info->pipe_mask = 0;
+	info->display.pipe_mask = 0;
 	info->memory_regions &= ~(REGION_STOLEN_SMEM |
 				  REGION_STOLEN_LMEM);
 }
-- 
2.25.1

