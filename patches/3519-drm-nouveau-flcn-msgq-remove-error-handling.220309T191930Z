From 6898cdafed07a9457689684fff03c4ebd452e432 Mon Sep 17 00:00:00 2001
From: Ben Skeggs <bskeggs@redhat.com>
Date: Wed, 15 Jan 2020 06:34:22 +1000
Subject: [PATCH 3519/4530] drm/nouveau/flcn/msgq: remove error handling for
 msg_queue_open(), it can't fail

Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
---
 drivers/gpu/drm/nouveau/nvkm/falcon/msgq.c | 9 ++-------
 1 file changed, 2 insertions(+), 7 deletions(-)

diff --git a/drivers/gpu/drm/nouveau/nvkm/falcon/msgq.c b/drivers/gpu/drm/nouveau/nvkm/falcon/msgq.c
index eb499b796fe5..ea3e7c73e990 100644
--- a/drivers/gpu/drm/nouveau/nvkm/falcon/msgq.c
+++ b/drivers/gpu/drm/nouveau/nvkm/falcon/msgq.c
@@ -22,13 +22,12 @@
  */
 #include "qmgr.h"
 
-static int
+static void
 msg_queue_open(struct nvkm_msgqueue *priv, struct nvkm_msgqueue_queue *queue)
 {
 	struct nvkm_falcon *falcon = priv->falcon;
 	mutex_lock(&queue->mutex);
 	queue->position = nvkm_falcon_rd32(falcon, queue->tail_reg);
-	return 0;
 }
 
 static void
@@ -91,11 +90,7 @@ msg_queue_read(struct nvkm_msgqueue *priv, struct nvkm_msgqueue_queue *queue,
 	const struct nvkm_subdev *subdev = priv->falcon->owner;
 	int ret;
 
-	ret = msg_queue_open(priv, queue);
-	if (ret) {
-		nvkm_error(subdev, "fail to open queue %d\n", queue->index);
-		return ret;
-	}
+	msg_queue_open(priv, queue);
 
 	if (msg_queue_empty(priv, queue)) {
 		ret = 0;
-- 
2.17.1

