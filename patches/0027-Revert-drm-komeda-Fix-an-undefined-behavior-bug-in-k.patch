From 6b97940d3b7c3c345e30a49f1de98f76c35b9cbf Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Fri, 12 Aug 2022 17:04:00 +0800
Subject: [PATCH 27/46] Revert "drm/komeda: Fix an undefined behavior bug in
 komeda_plane_add()"

This reverts commit 797f8ee35f03a3534d00b3e6250d66a4430c4970.
---
 drivers/gpu/drm/arm/display/komeda/komeda_plane.c | 4 ----
 1 file changed, 4 deletions(-)

diff --git a/drivers/gpu/drm/arm/display/komeda/komeda_plane.c b/drivers/gpu/drm/arm/display/komeda/komeda_plane.c
index bc3f42e915e9..a5f57b38d193 100644
--- a/drivers/gpu/drm/arm/display/komeda/komeda_plane.c
+++ b/drivers/gpu/drm/arm/display/komeda/komeda_plane.c
@@ -264,10 +264,6 @@ static int komeda_plane_add(struct komeda_kms_dev *kms,
 
 	formats = komeda_get_layer_fourcc_list(&mdev->fmt_tbl,
 					       layer->layer_type, &n_formats);
-	if (!formats) {
-		kfree(kplane);
-		return -ENOMEM;
-	}
 
 	err = drm_universal_plane_init(&kms->base, plane,
 			get_possible_crtcs(kms, c->pipeline),
-- 
2.27.0

