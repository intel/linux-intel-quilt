From 7c6df899d1ce36ea9c1b8948b49981d055857244 Mon Sep 17 00:00:00 2001
From: Chris Wilson <chris@chris-wilson.co.uk>
Date: Thu, 17 Dec 2020 16:47:00 +0000
Subject: [PATCH 1100/1107] HAX net/phy: Suppress WARN for calling stop while
 halted

References: https://gitlab.freedesktop.org/drm/intel/-/issues/8046
Closes: https://gitlab.freedesktop.org/drm/intel/-/issues/2805
Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
---
 drivers/net/phy/phy.c | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/drivers/net/phy/phy.c b/drivers/net/phy/phy.c
index d0c1718e2b16..459049f38504 100644
--- a/drivers/net/phy/phy.c
+++ b/drivers/net/phy/phy.c
@@ -1622,11 +1622,8 @@ void phy_stop(struct phy_device *phydev)
 	enum phy_state old_state;
 
 	if (!phy_is_started(phydev) && phydev->state != PHY_DOWN &&
-	    phydev->state != PHY_ERROR) {
-		WARN(1, "called from state %s\n",
-		     phy_state_to_str(phydev->state));
+	    phydev->state != PHY_ERROR)
 		return;
-	}
 
 	mutex_lock(&phydev->lock);
 	old_state = phydev->state;
-- 
2.25.1

