From 3c04dbbf025e806aaa194327a03a0b70ac4921fb Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Tue, 20 Jun 2023 05:27:40 +0800
Subject: [PATCH 08/30] Revert "drm/amd: Fix an out of bounds error in BIOS
 parser"

This reverts commit b8e7589f50b709b647b642531599e70707faf70c.
---
 drivers/gpu/drm/amd/display/dc/bios/bios_parser2.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/drivers/gpu/drm/amd/display/dc/bios/bios_parser2.c b/drivers/gpu/drm/amd/display/dc/bios/bios_parser2.c
index 9dd41eaf32cb5..930d2b7d34489 100644
--- a/drivers/gpu/drm/amd/display/dc/bios/bios_parser2.c
+++ b/drivers/gpu/drm/amd/display/dc/bios/bios_parser2.c
@@ -406,8 +406,11 @@ static enum bp_result get_gpio_i2c_info(
 	info->i2c_slave_address = record->i2c_slave_addr;
 
 	/* TODO: check how to get register offset for en, Y, etc. */
-	info->gpio_info.clk_a_register_index = le16_to_cpu(pin->data_a_reg_index);
-	info->gpio_info.clk_a_shift = pin->gpio_bitshift;
+	info->gpio_info.clk_a_register_index =
+			le16_to_cpu(
+			header->gpio_pin[table_index].data_a_reg_index);
+	info->gpio_info.clk_a_shift =
+			header->gpio_pin[table_index].gpio_bitshift;
 
 	return BP_RESULT_OK;
 }
-- 
2.25.1

