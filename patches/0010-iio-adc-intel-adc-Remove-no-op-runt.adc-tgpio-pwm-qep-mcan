From 8947fe3bcf6cbc9a652d1c0b298745fdba9fd886 Mon Sep 17 00:00:00 2001
From: Jarkko Nikula <jarkko.nikula@linux.intel.com>
Date: Tue, 3 Dec 2019 13:21:33 +0200
Subject: [PATCH 10/32] iio: adc: intel-adc: Remove no-op runtime PM calls

Remove runtime PM calls which are actually no-op due missing driver PM
callbacks. More over if those are added blindly it will cease the ADC
operation to fail since there is no code resuming autosuspended HW.

So for now it is better to remove these no-op runtime PM calls and add
them back only when implemented and validated correctly on a real HW.

Signed-off-by: Jarkko Nikula <jarkko.nikula@linux.intel.com>
---
 drivers/iio/adc/intel-adc.c | 9 ---------
 1 file changed, 9 deletions(-)

diff --git a/drivers/iio/adc/intel-adc.c b/drivers/iio/adc/intel-adc.c
index 9c834cba762b..4b3a7faaa1d5 100644
--- a/drivers/iio/adc/intel-adc.c
+++ b/drivers/iio/adc/intel-adc.c
@@ -16,7 +16,6 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/pci.h>
-#include <linux/pm_runtime.h>
 #include <linux/slab.h>
 
 #define ADC_DMA_CTRL			0x0000
@@ -387,11 +386,6 @@ static int intel_adc_probe(struct pci_dev *pci, const struct pci_device_id *id)
 	if (ret)
 		goto err;
 
-	pm_runtime_set_autosuspend_delay(&pci->dev, 1000);
-	pm_runtime_use_autosuspend(&pci->dev);
-	pm_runtime_put_autosuspend(&pci->dev);
-	pm_runtime_allow(&pci->dev);
-
 	return 0;
 
 err:
@@ -401,9 +395,6 @@ static int intel_adc_probe(struct pci_dev *pci, const struct pci_device_id *id)
 
 static void intel_adc_remove(struct pci_dev *pci)
 {
-	pm_runtime_forbid(&pci->dev);
-	pm_runtime_get_noresume(&pci->dev);
-
 	pci_free_irq_vectors(pci);
 }
 
-- 
2.17.1

