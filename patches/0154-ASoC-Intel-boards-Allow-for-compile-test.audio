From cc287cae88de1a056971f4a3907547dd38dfad3f Mon Sep 17 00:00:00 2001
From: Cezary Rojewski <cezary.rojewski@intel.com>
Date: Sat, 25 May 2019 16:45:10 +0200
Subject: [PATCH 154/154] ASoC: Intel: boards: Allow for compile test

Align boards Kconfig with goals set by:
ASoC: Intel: Make boards more available for compile test

To be split and squashed into introducing commit for each board.

Change-Id: I7cfdd053b8e1f988b75348becff9946e037c7575
Signed-off-by: Cezary Rojewski <cezary.rojewski@intel.com>
Reviewed-on:
Reviewed-by: Slawinski, AmadeuszX <amadeuszx.slawinski@intel.com>
Signed-off-by: Pankaj Bharadiya <pankaj.laxminarayan.bharadiya@intel.com>
---
 sound/soc/intel/boards/Kconfig | 32 ++++++++++----------------------
 1 file changed, 10 insertions(+), 22 deletions(-)

diff --git a/sound/soc/intel/boards/Kconfig b/sound/soc/intel/boards/Kconfig
index e03972edec83..432480b3a4a4 100644
--- a/sound/soc/intel/boards/Kconfig
+++ b/sound/soc/intel/boards/Kconfig
@@ -281,15 +281,13 @@ config SND_SOC_INTEL_BXTP_IVI_GENERIC_MACH
 	tristate
 
 choice SND_SOC_INTEL_BXT_RT298_I2S
-	prompt "Broxton with RT298 in I2S mode drivers"
-	depends on MFD_INTEL_LPSS && I2C && ACPI
+	tristate "Broxton with RT298 in I2S mode drivers"
+	depends on I2C && ACPI
+	depends on MFD_INTEL_LPSS || COMPILE_TEST
 	optional
 
 config SND_SOC_INTEL_BXT_RT298
-	bool
 	prompt "Broxton with RT298 in I2S mode"
-	depends on I2C && ACPI
-	depends on MFD_INTEL_LPSS || COMPILE_TEST
 	select SND_SOC_INTEL_BXT_RT298_MACH
 	help
 	  This adds support for ASoC machine driver for Broxton platforms
@@ -298,9 +296,7 @@ config SND_SOC_INTEL_BXT_RT298
 	  If unsure select "N".
 
 config SND_SOC_INTEL_BXTP_IVI_DUMMY_RSE
-	bool
 	prompt "BXTP with Dummy codec for RSE"
-	depends on MFD_INTEL_LPSS && I2C && ACPI
 	select SND_SOC_INTEL_BXTP_IVI_RSE_MACH
 	help
 	  This adds support for ASoC machine driver for Broxton-P platforms
@@ -309,9 +305,7 @@ config SND_SOC_INTEL_BXTP_IVI_DUMMY_RSE
 	  If unsure select "N".
 
 config SND_SOC_INTEL_BXTP_IVI_DUMMY_HU
-	bool
 	prompt "BXTP with Dummy codec for HU"
-	depends on MFD_INTEL_LPSS && I2C && ACPI
 	select SND_SOC_INTEL_BXTP_IVI_HU_MACH
 	help
 	  This adds support for ASoC machine driver for Broxton-P platforms
@@ -320,9 +314,7 @@ config SND_SOC_INTEL_BXTP_IVI_DUMMY_HU
 	  If unsure select "N".
 
 config SND_SOC_INTEL_BXTP_IVI_DUMMY_M3
-	bool
 	prompt "BXTP with Dummy codec for M3"
-	depends on MFD_INTEL_LPSS && I2C && ACPI
 	select SND_SOC_INTEL_BXTP_IVI_M3_MACH
 	help
 	  This adds support for ASoC machine driver for Broxton-P platforms
@@ -331,9 +323,7 @@ config SND_SOC_INTEL_BXTP_IVI_DUMMY_M3
 	  If unsure select "N".
 
 config SND_SOC_INTEL_BXTP_IVI_DUMMY_GENERIC
-	bool
 	prompt "BXTP with Dummy codec for GENERIC"
-	depends on MFD_INTEL_LPSS && I2C && ACPI
 	select SND_SOC_INTEL_BXTP_IVI_GENERIC_MACH
 	help
 	  This adds support for ASoC machine driver for Broxton-P platforms
@@ -351,14 +341,13 @@ config SND_SOC_INTEL_BXT_ULL_MACH
 	tristate
 
 choice SND_SOC_INTEL_BXT_TDF8532_I2S
-	prompt "Broxton with TDF8532 in I2S mode drivers"
-	depends on MFD_INTEL_LPSS && I2C && ACPI
+	tristate "Broxton with TDF8532 in I2S mode drivers"
+	depends on I2C && ACPI
+	depends on MFD_INTEL_LPSS || COMPILE_TEST
 	optional
 
 config SND_SOC_INTEL_BXT_TDF8532
-	bool
 	prompt "Broxton with TDF8532 in I2S mode"
-	depends on MFD_INTEL_LPSS && I2C && ACPI
 	select SND_SOC_INTEL_BXT_TDF8532_MACH
 	help
 	  This adds support for ASoC machine driver for Broxton IVI GP MRB
@@ -367,9 +356,7 @@ config SND_SOC_INTEL_BXT_TDF8532
 	  If unsure select "N".
 
 config SND_SOC_INTEL_BXT_ULL
-	bool
 	prompt "Broxton with Dummy codec for ULL"
-	depends on MFD_INTEL_LPSS && I2C && ACPI
 	select SND_SOC_INTEL_BXT_ULL_MACH
 	help
 	  This adds support for ASoC machine driver for Broxton ULL GP MRB
@@ -459,8 +446,8 @@ if SND_SOC_INTEL_GLK || (SND_SOC_SOF_GEMINILAKE  && SND_SOC_SOF_HDA_LINK)
 
 config SND_SOC_INTEL_KBLR_RT298_MACH
 	tristate "KBL-R with RT298 in I2S mode"
-	depends on X86 && ACPI && I2C
-	depends on SND_SOC_INTEL_SKYLAKE
+	depends on I2C && ACPI
+	depends on MFD_INTEL_LPSS || COMPILE_TEST
 	select SND_SOC_RT298
 	select SND_SOC_DMIC
 	select SND_SOC_HDAC_HDMI
@@ -491,7 +478,8 @@ if SND_SOC_INTEL_CNL
 
 config SND_SOC_INTEL_CNL_RT274_MACH
 	tristate "Cannonlake with RT274 I2S mode"
-	depends on MFD_INTEL_LPSS && I2C && ACPI
+	depends on I2C && ACPI
+	depends on MFD_INTEL_LPSS || COMPILE_TEST
 	select SND_SOC_RT274
 	select SND_SOC_DMIC
 	select SND_SOC_HDAC_HDMI
-- 
2.17.1

