From 1faf38d9e76126e9607d2ec492b4fc87134b238e Mon Sep 17 00:00:00 2001
From: Ranjan Dutta <ranjan.dutta@intel.com>
Date: Fri, 12 Aug 2022 17:03:53 +0800
Subject: [PATCH 13/46] Revert "drm/etnaviv: check for reaped mapping in
 etnaviv_iommu_unmap_gem"

This reverts commit 19323b3671a85788569d15685c8f83a05ec48cbb.
---
 drivers/gpu/drm/etnaviv/etnaviv_mmu.c | 6 ------
 1 file changed, 6 deletions(-)

diff --git a/drivers/gpu/drm/etnaviv/etnaviv_mmu.c b/drivers/gpu/drm/etnaviv/etnaviv_mmu.c
index 790cbb20aaeb..707f5c1a5874 100644
--- a/drivers/gpu/drm/etnaviv/etnaviv_mmu.c
+++ b/drivers/gpu/drm/etnaviv/etnaviv_mmu.c
@@ -289,12 +289,6 @@ void etnaviv_iommu_unmap_gem(struct etnaviv_iommu_context *context,
 
 	mutex_lock(&context->lock);
 
-	/* Bail if the mapping has been reaped by another thread */
-	if (!mapping->context) {
-		mutex_unlock(&context->lock);
-		return;
-	}
-
 	/* If the vram node is on the mm, unmap and remove the node */
 	if (mapping->vram_node.mm == &context->mm)
 		etnaviv_iommu_remove_mapping(context, mapping);
-- 
2.27.0

