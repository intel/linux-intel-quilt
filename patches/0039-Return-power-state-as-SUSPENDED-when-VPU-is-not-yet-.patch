From 38c51115d74630c4c48fcb40f7f2a4b1cc46983a Mon Sep 17 00:00:00 2001
From: Krishnakumar <krishnakumarx.kulakarni@intel.com>
Date: Fri, 11 Jun 2021 09:30:40 +0530
Subject: [PATCH 039/109] Return power state as SUSPENDED when VPU is not yet
 turned ON

Signed-off-by: Krishnakumar <krishnakumarx.kulakarni@intel.com>
---
 drivers/misc/intel_tsens/vpu_cooling_dev.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/drivers/misc/intel_tsens/vpu_cooling_dev.c b/drivers/misc/intel_tsens/vpu_cooling_dev.c
index a502e1561777..64cf2a51eeff 100644
--- a/drivers/misc/intel_tsens/vpu_cooling_dev.c
+++ b/drivers/misc/intel_tsens/vpu_cooling_dev.c
@@ -166,7 +166,8 @@ static int vpu_cooling_get_cur_state(struct thermal_cooling_device
 				xlinkerror, device_status);
 			vpu_cdev_priv_data->err_flags.g_err_status_logged = 1;
 		}
-		return VPU_COOLING_FAILED;
+		*state = (unsigned long)POWER_SUSPENDED;
+		return VPU_COOLING_SUCCESS;
 	}
 
 	/* mode to state mapping is one-to-one */
-- 
2.25.1

