From d6e3b93911aca3c8c74e16cec1d9dd58375db6c6 Mon Sep 17 00:00:00 2001
From: Jyothi A <jyothix.a@intel.com>
Date: Thu, 26 Aug 2021 09:13:56 +0530
Subject: [PATCH 044/109] Fix for xlink-smbus crash while enabling multiple
 SOCs

HSDES: 1508751579

Signed-off-by: Jyothi A <jyothix.a@intel.com>
---
 drivers/misc/hddl_device/hddl_device.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/misc/hddl_device/hddl_device.c b/drivers/misc/hddl_device/hddl_device.c
index 786c9008439c..a04a8d833ecd 100644
--- a/drivers/misc/hddl_device/hddl_device.c
+++ b/drivers/misc/hddl_device/hddl_device.c
@@ -394,7 +394,7 @@ int intel_hddl_register_xlink_i2c_adap(struct device *dev,
 		xlink_i2c_info.id = c->board_info.board_id << 5 |
 					soc_id << 2 | i;
 		c->xlink_i2c_ch[i] =
-			c->i2c_chan_num + (soc_id * 2) + i;
+			c->i2c_chan_num + i;
 		xlink_i2c_info.data = c;
 		xlink_i2c_info.size_data =
 			sizeof(struct intel_hddl_clients);
-- 
2.25.1

