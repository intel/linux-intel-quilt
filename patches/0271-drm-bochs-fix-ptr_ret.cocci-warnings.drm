From 55c65274102b4a20a064f831e9e969b4fec8bd9d Mon Sep 17 00:00:00 2001
From: kbuild test robot <lkp@intel.com>
Date: Mon, 20 May 2019 20:23:15 +0800
Subject: [PATCH 271/529] drm/bochs: fix ptr_ret.cocci warnings

drivers/gpu/drm/bochs/bochs_mm.c:19:1-3: WARNING: PTR_ERR_OR_ZERO can be used

 Use PTR_ERR_OR_ZERO rather than if(IS_ERR(...)) + PTR_ERR

Generated by: scripts/coccinelle/api/ptr_ret.cocci

Fixes: b3a25b9af80d ("drm/bochs: Convert bochs driver to VRAM MM")
CC: Thomas Zimmermann <tzimmermann@suse.de>
Signed-off-by: kbuild test robot <lkp@intel.com>
Link: http://patchwork.freedesktop.org/patch/msgid/20190520122314.GA155389@lkp-kbuild22
Signed-off-by: Gerd Hoffmann <kraxel@redhat.com>
---
 drivers/gpu/drm/bochs/bochs_mm.c | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/drivers/gpu/drm/bochs/bochs_mm.c b/drivers/gpu/drm/bochs/bochs_mm.c
index e71e4f7dfc73..8f9bb886f7ad 100644
--- a/drivers/gpu/drm/bochs/bochs_mm.c
+++ b/drivers/gpu/drm/bochs/bochs_mm.c
@@ -13,10 +13,7 @@ int bochs_mm_init(struct bochs_device *bochs)
 	vmm = drm_vram_helper_alloc_mm(bochs->dev, bochs->fb_base,
 				       bochs->fb_size,
 				       &drm_gem_vram_mm_funcs);
-	if (IS_ERR(vmm))
-		return PTR_ERR(vmm);
-
-	return 0;
+	return PTR_ERR_OR_ZERO(vmm);
 }
 
 void bochs_mm_fini(struct bochs_device *bochs)
-- 
2.17.1

